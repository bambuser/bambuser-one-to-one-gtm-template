___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Bambuser One-to-One Integration template",
  "categories": [
    "CHAT",
    "SALES",
    "PERSONALIZATION"
  ],
  "brand": {
    "id": "github.com_bambuser",
    "displayName": "Bambuser",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO2dB5QmRRHHv+PMqGdCERXFgIhnzpkkBh4qomJAxfQQI4KggglBQJIoRsCIIGLGhGIEzBkD5nwGgtkzcHft+83j/73a3pmenm93v+5vr/q9ers729NTXV3VXV1VXT0ajUbBwWngPDDqooEzh9PAeWDkAuJM4BPBaBIaOOM4DZwHRi4gzgQ+EYx8BXEm8IlgtLg0cII6DZwHRi4gzgQ+EYx8BXEm8Ilg5CqWM4FPBKNp0cCZzWngPDByAXEm8Ilg5CuIM4FPBCNXsZwJfCIY+R7EmcAnglF5GhRHwMFpECqmQXEEHJwGoWIaFEfAwWkQKqZBcQQcnAahYhoUR8DBaRAqpkFxBBycBqFiGhRHwMFpECqmQXEEHJwGoWIaFEfAwWkQKqZBcQQcnAahYhoUR8DBaRAqpkFxBBycBqFiGhRHwMFpECqmQXEEHJwGoWIaFEfAwWkQKqZBcQQcnAahYhoUR8DBaRAqpkFxBBycBqFiGhRHwMFpECqmQXEEHJwGoWIaFEfAwWkQKqZBcQQcnAahYhoUR8DBaRAqpkFxBBycBqFiGhRHwMFpECqmQXEEHJwGoWIaFEfAwWkQKqZBcQQcnAahYhoUR8DBaRAqpkFxBBycBqFiGixeYytWrMiCCjrt4DQIUxcQB6fBaPnRYOGNaFXYYostwk1vetOw1VZbtQL/23LLLX0VKT/oDqMpCghwtatdbVD9TTbZxAfJGTXMAA0W1gCMfu1rX7v5/dRTTw1f/epXwznnnBPOO++8OXDuueeGL33pS+ETn/hEuN71rtfUv/KVr1y68w5Og7CkAnL5y1++UZv4/Ze//GXoK//+97/DzW52s6b+Na5xDWdQZ9BQOQ0W1sDlLne5cMMb3rD5/Qc/+EEjBJdeemlYt27dHOAZ5ZJLLmn2I9RftWpV6c47OA3CkgvIjW50o+b3H/3oR40QrF+/ft7KsWHDhubnX/7yFxcQZ8owQzRwAalgEBxG1dLABaSCQXAYVUsDF5AKBsFhVC0NXEAqGASHUbU0cAGpYBAcRtXSoE4B8eDGNN2XIvDTg0lH9QpIzuAsZSTwEOYowUh935wEn5w2V3j0dR0CIrjmNa8ZbnzjG4eb3/zm4Ra3uEUT4Hj9618/XOEKV5gKIxIZQOjMDW5wgwaPm9zkJg3gDL3uda8brnKVq0xVMGKGBQfoB22gEVEMV7/61RckKPSXPtIeQPt8ZxOPlysrIBrYzTffvAk/UUxXF8CwvHud61xnQQxh37nWta7VMBnfRyhy3keIFbUM7itXruzERc8QcJiQdyR0inK2fys+TczJe9AX/FJ9BXdwArecfjPp0Gaq/mg0GkdgC6+NcEWZvoBAdOojELe85S3ntLfbbruFgw8+OBx33HHhNa95TTj88MPDPvvsE251q1vNqbfNNtuMV5UhM53qsnrFbYohHvWoR4V99903vOQlLwkvf/nLm5/7779/eMITnhDufve7z3uH2VzhNm24XOlKVxpE06te9apjJhatBE984hPDK17xinD88cc3NDrooIPCAx7wgDl1WAViZhZeTEoxzenvy172sqbNV7/61eGQQw4Je+2115w69E/jvJGtLNMXEFYC6uvnzjvvHD74wQ+G3/zmN+G///3vvHdp769//Ws4//zzwxvf+MZxkCOztyKDc2Y21WG2ts9f/OIXN1HGP/3pTxv82nCgEE/2j3/8I/z2t78NX/7ylxtctt9++3E7W2+9decxgLve9a7hhBNOCK9//euTsMMOO8xr61nPelb4/Oc/Hy688MJxTJsta9euDT/5yU/CSSed1IqLGJrzOppUHvKQh4SPfOQj4Xe/+11rf4mfu/jii5sIbCYstaVA041ISKYvIKtXrx6//+53vzv861//aq0viAsD99a3vjU5Y3aBnT1POeWU8Pvf/75VGPpwUPnnP/8ZvvCFL4QHPehBY1zYx+gbEsanPe1pIae88IUvHL9761vfOnzlK1+Z9/0UXvRHbYCLaCLGBs4888wmqrqrzbZ2v/e974UHPvCBc2i4kahb0xUQVgLp+t/61rfmzFi818WMPFcdlQsuuKCZme2MmRo01dlvv/3mCYb9fgoHgHrUt/VguDe96U1N+9BDM7VWySc/+cnj2d9+JwbN1s985jPDn//853n45dLmxBNPHAuG1LQ73/nO4ec//3kWzW0/7WSA6mknpY0Apr+CWOFIDXxXob7egYn22GOPOYNmhUS/s0/g5xve8IZ57aRWiBxcLBN94AMfGDOmXUGsgHQxJGXvvfcOD33oQ8dqTyyIfcXiwn5CdGDvhIo2Cc03bNgw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"
  },
  "description": "If you\u0027re a Bambuser One-to-one customer, this tag is an easy way to integrate and get started with the product on your website. Make your site visitors start a call from your site straight away.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "bambuserOrgId",
    "displayName": "Bambuser Organisation ID",
    "simpleValueType": true,
    "help": "You should receive an organisation id form your Bambuser contact"
  },
  {
    "type": "TEXT",
    "name": "locale",
    "displayName": "Locale",
    "simpleValueType": true,
    "valueHint": "e.g: en-US, en-GB, sv-SE",
    "help": "We are using INTL to parse locale https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale"
  },
  {
    "type": "GROUP",
    "name": "overlayWidget",
    "displayName": "Overlay Widget",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "overlayWidgetVariant",
        "displayName": "Choose overlay widget type",
        "macrosInSelect": false,
        "selectItems": [
          {
            "value": "Avatar",
            "displayValue": "Avatar"
          },
          {
            "value": "Side dock",
            "displayValue": "Side dock"
          },
          {
            "value": "none",
            "displayValue": "None"
          }
        ],
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "overlayWidgetPopupTimeout",
        "displayName": "Time to wait before showing overlay widget first time",
        "simpleValueType": true,
        "defaultValue": 2,
        "enablingConditions": [
          {
            "paramName": "overlayWidgetVariant",
            "paramValue": "none",
            "type": "NOT_EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_NEGATIVE_NUMBER"
          }
        ],
        "valueUnit": "seconds"
      }
    ],
    "help": "Have a floating widget on your site for your customers to interact with. Learn more here: https://bambuser.com/docs/one-to-one/overlay-widget"
  },
  {
    "type": "GROUP",
    "name": "Advanced Bambuser Features",
    "displayName": "Advanced Bambuser Features",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "datalayerTracking",
        "checkboxText": "Track Bambuser events to the datalayer",
        "simpleValueType": true,
        "help": "These events will allow you to track user interactions. Check out our guide to pipe all these straight into Google Analytics: https://bambuser.com/docs/one-to-one/one-to-one-gtm-ga4",
        "defaultValue": true
      },
      {
        "type": "CHECKBOX",
        "name": "ecommerceTracking",
        "checkboxText": "Let Bambuser trigger ecommerce events",
        "simpleValueType": true,
        "help": "Bambuser track standard GA4 ecommerce events by default so that you can follow user funnels and conversions in Google Analytics. Learn more here: https://bambuser.com/docs/one-to-one/one-to-one-gtm-ga4",
        "defaultValue": true,
        "enablingConditions": []
      },
      {
        "type": "CHECKBOX",
        "name": "launchInDebugMode",
        "checkboxText": "Launch in Debug Mode",
        "simpleValueType": true,
        "help": "Launching in debug mode will expose the oneToOneEmbed instance on the window for you to be able to inspect in the developer console"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const callInWindow = require('callInWindow');
const injectScript = require('injectScript');
const log = require('logToConsole');
const makeInteger = require('makeInteger');
const queryPermission = require('queryPermission');
const setInWindow = require('setInWindow');

const conf = {
    orgId: data.bambuserOrgId,
    triggers: [
      'manual',
      'connect-link', 
      'smart',
    ],
    smartVariantOverride: data.overlayWidgetVariant,
    popupTimeoutSeconds: makeInteger(data.overlayWidgetPopupTimeuot) || 2,
    datalayerTracking: data.datalayerTracking,
    ecommerceTracking: data.ecommerceTracking
  
};
if (!!data.queueId) { conf.queue = data.queueId; }
if (!!data.locale) { conf.locale = data.locale; }

const launch = function() {
  const oneToOneEmbed = callInWindow('launchBambuserOneToOne', conf);
  data.gtmOnSuccess();
};

if(queryPermission('access_globals', 'write', 'onBambuserOneToOneReady')) {
  setInWindow('onBambuserOneToOneReady', launch, data.launchInDebugMode);


  const url = 'https://one-to-one.bambuser.com/embed.js';
  if (queryPermission('inject_script', url)) {
    injectScript(url);
  }
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.bambuser.com/embed.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "launchBambuserOneToOne"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "onBambuserOneToOneReady"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Can inject script
  code: |
    const mockData = {
    };

    runCode(mockData);
    assertApi('injectScript').wasCalled();


___NOTES___

Created on 27/01/2022, 17:26:04


